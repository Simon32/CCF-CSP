#include<iostream>
#include<vector>
using namespace std;
int main(){
	int n,m;
	cin>>n>>m;
	vector<int> vec(n);
	for(int i=0;i<n;i++){
		cin>>vec[i];
	}
	int opt;
	int l,r,v;
	for(int j=0;j<m;j++){
		cin>>opt;
		if(opt==2){
			int sum=0;
			cin>>l>>r;
			for(int k=l-1;k<r;k++){
				sum+=vec[k];
			}
			cout<<sum<<endl;	
		}
		else{
			cin>>l>>r>>v;
			if(v==1) continue; 
			for(int k=l-1;k<r;k++){
				if(v<=vec[k]&&vec[k]%v==0){
					
					vec[k]/=v;
				}
			}
		}
	}
}
